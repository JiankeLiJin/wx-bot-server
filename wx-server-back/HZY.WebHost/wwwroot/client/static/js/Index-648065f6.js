import{b as U,r as B,a as w,i as F,o as D,c as d,j as m,d as _,f as o,w as a,l as r,q as N,A as g,z as R,F as V,C as z,n as u,k,e as T,t as A}from"./index-7722fba7.js";import M from"./List-0faac338.js";import{w as C}from"./wxContactService-ac565ad3.js";const j=u("\u67E5\u8BE2"),K=u("\u91CD\u7F6E"),P=u("\u91CD\u7F6E"),$=u(" \u68C0\u7D22 "),q=["src"],E={name:"wxContactIndex"},W=Object.assign(E,{setup(G){const x=U(),t=B({search:{state:!0,vm:{name:null}},loading:!1,pageSizeOptions:[10,20,50,100,500,1e3],rows:10,page:1,total:0,columns:[],data:[]}),h=w(null),p=w(null),b=x.getPowerByMenuId(F.currentRoute.value.meta.menuId),s={onChange(l){const{currentPage:e,pageSize:i}=l;t.page=e==0?1:e,t.rows=i,s.findList()},onResetSearch(){t.page=1;let l=t.search.vm;for(let e in l)l[e]=null;s.findList()},findList(){t.loading=!0,C.findList(t.rows,t.page,t.search.vm).then(l=>{let e=l.data;t.loading=!1,t.page=e.page,t.rows=e.size,t.total=e.total,t.columns=e.columns,t.data=e.dataSource})},deleteList(l){let e=[];l?e.push(l):e=p.value.table.getCheckboxRecords().map(i=>i.id),C.deleteList(e).then(i=>{i.code==1&&(A.message("\u5220\u9664\u6210\u529F!","\u6210\u529F"),s.findList())})},openForm(l){h.value.openForm({visible:!0,key:l})}};return D(()=>{s.findList()}),(l,e)=>{const i=d("a-input"),v=d("a-col"),f=d("a-button"),L=d("a-row"),y=d("a-checkbox"),S=d("a-popover"),c=d("vxe-column"),I=d("Info");return m(),_("div",null,[o(M,{ref_key:"refList",ref:p,tableData:r(t),onOnChange:s.onChange},{search:a(()=>[o(L,{gutter:[15,15]},{default:a(()=>[o(v,{xs:24,sm:12,md:8,lg:6,xl:4},{default:a(()=>[o(i,{value:r(t).search.vm.name,"onUpdate:value":e[0]||(e[0]=n=>r(t).search.vm.name=n),placeholder:"\u6635\u79F0\u6216\u8005\u5907\u6CE8"},null,8,["value"])]),_:1}),o(v,{xs:24,sm:12,md:8,lg:6,xl:4,style:{float:"right"}},{default:a(()=>[o(f,{type:"primary",class:"mr-15",onClick:s.findList},{default:a(()=>[j]),_:1},8,["onClick"]),o(f,{class:"mr-15",onClick:s.onResetSearch},{default:a(()=>[K]),_:1},8,["onClick"])]),_:1})]),_:1})]),"toolbar-right":a(()=>[o(i,{value:r(t).search.vm.name,"onUpdate:value":e[1]||(e[1]=n=>r(t).search.vm.name=n),placeholder:"\u540D\u79F0",onKeyup:s.findList},null,8,["value","onKeyup"]),o(f,{onClick:s.onResetSearch},{default:a(()=>[P]),_:1},8,["onClick"]),r(b).search?(m(),N(f,{key:0,onClick:e[2]||(e[2]=n=>r(t).search.state=!r(t).search.state)},{icon:a(()=>[o(g,{name:r(t).search.state?"UpOutlined":"DownOutlined"},null,8,["name"])]),default:a(()=>[$]),_:1})):R("",!0),o(S,null,{content:a(()=>[(m(!0),_(V,null,z(r(t).columns.filter(n=>n.fieldName.substr(0,1)!="_"),n=>(m(),_("div",{key:n.id},[o(y,{checked:n.show,"onUpdate:checked":O=>n.show=O,onChange:e[3]||(e[3]=()=>l.nextTick(()=>p.value.table.refreshColumn()))},{default:a(()=>[u(k(n.title),1)]),_:2},1032,["checked","onUpdate:checked"])]))),128))]),default:a(()=>[o(f,null,{default:a(()=>[o(g,{name:"BarsOutlined"})]),_:1})]),_:1})]),"table-col-default":a(()=>[o(c,{field:"wxId",title:"\u5FAE\u4FE1ID","show-overflow":""}),o(c,{field:"wxCode",title:"\u5FAE\u4FE1Code","show-overflow":""}),o(c,{field:"name",title:"\u5FAE\u4FE1\u6635\u79F0","show-overflow":""}),o(c,{field:"alias",title:"\u5907\u6CE8","show-overflow":""}),o(c,{field:"gender",title:"\u6027\u522B","show-overflow":""},{default:a(({row:n})=>[u(k(n.gender==1?"\u7537":"\u5973"),1)]),_:1}),o(c,{field:"avatarUrl",title:"\u5934\u50CF","show-overflow":""},{default:a(({row:n})=>[T("img",{src:n.avatarUrl,width:"35",height:"35"},null,8,q)]),_:1}),o(c,{field:"lastModificationTime",title:"\u66F4\u65B0\u65F6\u95F4","show-overflow":""}),o(c,{field:"creationTime",title:"\u521B\u5EFA\u65F6\u95F4","show-overflow":""})]),_:1},8,["tableData","onOnChange"]),o(I,{ref_key:"refForm",ref:h,onOnSuccess:e[4]||(e[4]=()=>s.findList())},null,512)])}}});export{W as default};
