var j=Object.defineProperty;var U=Object.getOwnPropertySymbols;var q=Object.prototype.hasOwnProperty,H=Object.prototype.propertyIsEnumerable;var O=(s,d,r)=>d in s?j(s,d,{enumerable:!0,configurable:!0,writable:!0,value:r}):s[d]=r,V=(s,d)=>{for(var r in d||(d={}))q.call(d,r)&&O(s,r,d[r]);if(U)for(var r of U(d))H.call(d,r)&&O(s,r,d[r]);return s};import{p as w,b as E,r as Q,a as T,i as W,I as X,aS as Y,c as u,j as b,q as g,w as a,f as e,e as F,L as Z,M as ee,l as o,A as C,C as te,n as m,k as K,t as L}from"./index-4af06715.js";import{C as ae}from"./CodeGeneration-67f85769.js";import"./MdEditorShowCode-dc4c2418.js";const k="admin/LowCodeTableInfo";var N={findList(s,d,r={}){return w(`${k}/findList/${s}/${d}`,r,!1)},deleteList(s){return s&&s.length===0?tools.message("\u8BF7\u9009\u62E9\u8981\u5220\u9664\u7684\u6570\u636E!","\u8B66\u544A"):w(`${k}/deleteList`,s,!1)},synchronization(s){return w(`${k}/synchronization/${s}`,null,!1)},change(s){return w(`${k}/change`,s,!1)}};const le=m("\u67E5\u8BE2"),ne=m("\u91CD\u7F6E"),oe=m(" \u68C0\u7D22 "),se=m(" \u540C\u6B65\u5B57\u6BB5 "),ie=m(" \u63D0\u4EA4\u66F4\u6539 "),de=m(" \u6279\u91CF\u5220\u9664 "),re=m("\u662F"),ce=m("\u5426"),ue=m("\u662F"),pe=m("\u5426"),me=F("a",{class:"text-danger"},"\u5220\u9664",-1),fe={name:"LowCode-ColumnIndex"},ve=Object.assign(fe,{setup(s,{expose:d}){const r=E(),t=Q({table:{search:{state:!1,vm:{columnName:null,describe:null,low_Code_TableId:null}},loading:!1,pageSizeOptions:[10,20,50,100,500,1e3],rows:20,page:1,total:0,data:[]},row:{},title:"",activeKey:"1"}),D=T(null),z=T(null),$=T(null),R=r.getPowerByMenuId(W.currentRoute.value.meta.menuId),c={onChange(i){const{currentPage:l,pageSize:f}=i;t.table.page=l==0?1:l,t.table.rows=f,c.findList()},onResetSearch(){t.table.page=1;let i=t.table.search.vm;for(let l in i)l!="low_Code_TableId"&&(i[l]=null);c.findList()},findList(){t.table.loading=!0,N.findList(t.table.rows,t.table.page,t.table.search.vm).then(i=>{let l=i.data;t.table.loading=!1,t.table.page=l.page,t.table.rows=l.size,t.table.total=l.total,t.table.data=l.dataSource})},deleteList(i){let l=[];i?l.push(i):l=z.value.getCheckboxRecords().map(f=>f.id),N.deleteList(l).then(f=>{f.code==1&&(L.message("\u5220\u9664\u6210\u529F!","\u6210\u529F"),c.findList())})},openForm(i){D.value.openForm({visible:!0,key:i})},synchronization(){N.synchronization(t.row.id).then(i=>{L.message("\u540C\u6B65\u6210\u529F!","\u6210\u529F"),c.findList()})},change(){N.change(t.table.data).then(i=>{L.message("\u6570\u636E\u53D8\u66F4\u6210\u529F!","\u6210\u529F"),c.findList()})},loadData(i){t.row=i,t.table.search.vm.low_Code_TableId=t.row.id,c.findList()}};return d(V({},c)),X(()=>t.activeKey,i=>{i=="3"&&Y(()=>{$.value.openForm({key:t.row.tableName})})}),(i,l)=>{const f=u("a-input"),h=u("a-col"),_=u("a-button"),S=u("a-row"),I=u("a-card"),v=u("a-popconfirm"),B=u("a-space"),p=u("vxe-column"),y=u("a-tag"),J=u("vxe-table"),A=u("vxe-pager"),G=u("a-spin"),P=u("a-tab-pane"),M=u("a-tabs");return b(),g(M,{activeKey:o(t).activeKey,"onUpdate:activeKey":l[9]||(l[9]=n=>o(t).activeKey=n)},{default:a(()=>[e(P,{key:"1",tab:"\u5B57\u6BB5\u8BBE\u7F6E"},{default:a(()=>[F("div",null,[Z(e(I,{class:"mb-15"},{default:a(()=>[e(S,{gutter:[15,15]},{default:a(()=>[e(h,{xs:24,sm:12,md:8,lg:6,xl:4},{default:a(()=>[e(f,{value:o(t).table.search.vm.columnName,"onUpdate:value":l[0]||(l[0]=n=>o(t).table.search.vm.columnName=n),placeholder:"\u540D\u79F0"},null,8,["value"])]),_:1}),e(h,{xs:24,sm:12,md:8,lg:6,xl:4},{default:a(()=>[e(f,{value:o(t).table.search.vm.describe,"onUpdate:value":l[1]||(l[1]=n=>o(t).table.search.vm.describe=n),placeholder:"\u663E\u793A\u540D\u79F0"},null,8,["value"])]),_:1}),e(h,{xs:24,sm:12,md:8,lg:6,xl:4,style:{float:"right"}},{default:a(()=>[e(_,{type:"primary",class:"mr-15",onClick:c.findList},{default:a(()=>[le]),_:1},8,["onClick"]),e(_,{class:"mr-15",onClick:c.onResetSearch},{default:a(()=>[ne]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1},512),[[ee,o(t).table.search.state]]),e(I,null,{default:a(()=>[e(S,{gutter:[15,15]},{default:a(()=>[e(h,{xs:24,sm:24,md:12,lg:12,xl:12},{default:a(()=>[e(B,{size:15},{default:a(()=>[o(R).search?(b(),g(_,{key:0,onClick:l[2]||(l[2]=n=>o(t).table.search.state=!o(t).table.search.state)},{icon:a(()=>[e(C,{name:o(t).table.search.state?"UpOutlined":"DownOutlined"},null,8,["name"])]),default:a(()=>[oe]),_:1})):te("",!0),e(v,{title:"\u60A8\u786E\u5B9A\u8981\u66F4\u65B0\u8868\u5417?\u53EF\u80FD\u4F1A\u5BFC\u81F4\u6570\u636E\u4E22\u5931",onConfirm:l[3]||(l[3]=n=>c.synchronization()),okText:"\u786E\u5B9A",cancelText:"\u53D6\u6D88"},{default:a(()=>[e(_,{type:"primary"},{icon:a(()=>[e(C,{name:"ReloadOutlined"})]),default:a(()=>[se]),_:1})]),_:1}),e(v,{title:"\u60A8\u786E\u5B9A\u8981\u63D0\u4EA4\u66F4\u6539?",onConfirm:l[4]||(l[4]=n=>c.change()),okText:"\u786E\u5B9A",cancelText:"\u53D6\u6D88"},{default:a(()=>[e(_,{type:"primary"},{icon:a(()=>[e(C,{name:"PlusOutlined"})]),default:a(()=>[ie]),_:1})]),_:1}),e(v,{title:"\u60A8\u786E\u5B9A\u8981\u5220\u9664\u5417?",onConfirm:l[5]||(l[5]=n=>c.deleteList()),okText:"\u786E\u5B9A",cancelText:"\u53D6\u6D88"},{default:a(()=>[e(_,{type:"danger"},{icon:a(()=>[e(C,{name:"DeleteOutlined"})]),default:a(()=>[de]),_:1})]),_:1})]),_:1})]),_:1}),e(h,{xs:24,sm:24,md:12,lg:12,xl:12,class:"text-right"})]),_:1}),e(G,{spinning:o(t).table.loading},{default:a(()=>[e(J,{class:"mt-15",ref_key:"refTable",ref:z,size:"medium",border:"",stripe:"",data:o(t).table.data,"row-config":{isCurrent:!0,isHover:!0},"column-config":{isCurrent:!0,resizable:!0},"checkbox-config":{highlight:!0},"edit-config":{trigger:"click",mode:"cell"}},{default:a(()=>[e(p,{type:"seq",width:"50"}),e(p,{type:"checkbox",width:"50"}),e(p,{field:"columnName",title:"\u5217\u540D\u79F0"}),e(p,{field:"databaseColumnType",title:"\u6570\u636E\u5E93\u7C7B\u578B",width:"130px"}),e(p,{field:"csField",title:"C#\u5B57\u6BB5\u540D\u79F0"}),e(p,{field:"csType",title:"C#\u6570\u636E\u7C7B\u578B",width:"100px"}),e(p,{field:"isPrimary",title:"\u662F\u5426\u4E3B\u952E",width:"100px"},{default:a(({row:n})=>[n.isPrimary?(b(),g(y,{key:0,color:"success"},{default:a(()=>[re]),_:1})):(b(),g(y,{key:1,color:"default"},{default:a(()=>[ce]),_:1}))]),_:1}),e(p,{field:"isIdentity",title:"\u662F\u5426\u81EA\u589E",width:"100px"},{default:a(({row:n})=>[n.isIdentity?(b(),g(y,{key:0,color:"success"},{default:a(()=>[ue]),_:1})):(b(),g(y,{key:1,color:"default"},{default:a(()=>[pe]),_:1}))]),_:1}),e(p,{field:"displayName",title:"\u663E\u793A\u540D\u79F0","edit-render":{},width:"150px"},{default:a(({row:n})=>[m(K(n.displayName),1)]),edit:a(({row:n})=>[e(f,{value:n.displayName,"onUpdate:value":x=>n.displayName=x,placeholder:"\u663E\u793A\u540D\u79F0"},null,8,["value","onUpdate:value"])]),_:1}),e(p,{field:"describe",title:"\u5217\u63CF\u8FF0","edit-render":{},width:"150px"},{default:a(({row:n})=>[m(K(n.describe),1)]),edit:a(({row:n})=>[e(f,{value:n.describe,"onUpdate:value":x=>n.describe=x,placeholder:"\u5217\u63CF\u8FF0"},null,8,["value","onUpdate:value"])]),_:1}),e(p,{field:"lastModificationTime",title:"\u66F4\u65B0\u65F6\u95F4",width:"120px"}),e(p,{field:"creationTime",title:"\u521B\u5EFA\u65F6\u95F4",width:"120px"}),e(p,{field:"id",title:"\u64CD\u4F5C",width:"80px"},{default:a(({row:n})=>[e(v,{title:"\u60A8\u786E\u5B9A\u8981\u5220\u9664\u5417?",onConfirm:x=>c.deleteList(n.id),okText:"\u786E\u5B9A",cancelText:"\u53D6\u6D88"},{default:a(()=>[me]),_:2},1032,["onConfirm"])]),_:1})]),_:1},8,["data"]),e(A,{background:"","current-page":o(t).table.page,"onUpdate:current-page":l[6]||(l[6]=n=>o(t).table.page=n),"page-size":o(t).table.rows,"onUpdate:page-size":l[7]||(l[7]=n=>o(t).table.rows=n),total:o(t).table.total,"page-sizes":o(t).table.pageSizeOptions,layouts:["PrevJump","PrevPage","JumpNumber","NextPage","NextJump","Sizes","FullJump","Total"],onPageChange:c.onChange},null,8,["current-page","page-size","total","page-sizes","onPageChange"])]),_:1},8,["spinning"])]),_:1})])]),_:1}),e(P,{key:"3",tab:"\u4EE3\u7801\u751F\u6210"},{default:a(()=>[e(ae,{ref_key:"refCodeGenerationVue",ref:$,class:"mt-15",tableName:o(t).row.tableName,"onUpdate:tableName":l[8]||(l[8]=n=>o(t).row.tableName=n)},null,8,["tableName"])]),_:1})]),_:1},8,["activeKey"])}}});export{ve as default};
